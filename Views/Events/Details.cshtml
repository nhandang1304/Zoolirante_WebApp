@model Zoolirante_Open_Minded.ViewModels.EventViewModel
@{
    ViewData["Title"] = Model.Event.Title;
}

<style>
    .hero {
        position: relative;
        height: 420px;
        border-radius: 18px;
        overflow: hidden;
        box-shadow: 0 14px 36px rgba(0,0,0,.18);
    }

        .hero img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .hero .overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg,rgba(0,0,0,.05) 0%, rgba(0,0,0,.45) 65%, rgba(0,0,0,.75) 100%);
        }

        .hero .title {
            position: absolute;
            left: 24px;
            bottom: 18px;
            color: #fff;
            font-weight: 900;
            letter-spacing: .5px;
            text-shadow: 0 2px 10px rgba(0,0,0,.5);
        }

    .chip {
        background: #eef6e7;
        color: #3b6c16;
        padding: .4rem .7rem;
        border-radius: 999px;
        font-weight: 600;
        font-size: .9rem;
    }

    .meta-row strong {
        width: 110px;
        display: inline-block;
        color: #2b2b2b;
    }

    .cardz {
        border-radius: 16px;
        box-shadow: 0 10px 28px rgba(0,0,0,.10);
    }

    .btn-zoo {
        background: #5a8f2b;
        color: #fff;
        border: 0;
        border-radius: 12px;
        padding: .55rem .95rem;
        font-weight: 700;
    }

        .btn-zoo:hover {
            filter: brightness(.95);
        }
</style>

<div class="hero mb-4">
    <img src="@(string.IsNullOrWhiteSpace(Model.Event.ImageUrl)
                       ? "/images/placeholder-event.jpg"
                       : Model.Event.ImageUrl)"
         alt="@Model.Event.Title" />
    <div class="overlay"></div>
    <h1 class="title">@Model.Event.Title</h1>
</div>


    <div class="row g-4">
        <div class="col-lg-8">
            <div class="card cardz p-3 p-md-4">
                <div class="d-flex gap-2 mb-3">
                    <span class="chip">@Model.Event.StartTime.ToString("ddd d MMM, h:mm tt") – @Model.Event.EndTime.ToString("h:mm tt")</span>
                    <span class="chip">Location: @Model.Event.Location</span>
                    @if (Model.Event.Price <= 0)
                    {
                        <span class="chip">Free</span>
                    }
                    else
                    {

                        <span class="chip">A$ @Model.Event.Price.ToString("0.00")</span>
                    }
                    @if (Model.Event.Capacity.HasValue)
                    {
                        <span class="chip">Capacity: @Model.Event.Capacity</span>
                    }
                </div>

                @if (!string.IsNullOrWhiteSpace(Model.Event.Description))
                {
                    <p class="fs-5">@Model.Event.Description</p>
                }

                <div class="meta-row mt-3">
                    <p class="mb-1"><strong>Starts:</strong> @Model.Event.StartTime.ToString("f")</p>
                    <p class="mb-1"><strong>Ends:</strong> @Model.Event.EndTime.ToString("f")</p>
                    <p class="mb-1"><strong>Location:</strong> @Model.Event.Location</p>
                </div>

                <div class="mt-3 d-flex gap-2">
                    <a asp-controller="Events" asp-action="Ics" asp-route-id="@Model.Event.EventId" class="btn btn-outline-dark" style="border-radius:12px;">Add to Calendar (.ics)</a>
                    <a asp-controller="EntranceTickets" asp-action="Buy" asp-route-eventId="@Model.Event.EventId" class="btn btn-zoo">Reserve / Buy Ticket</a>
                    <a asp-action="Index" class="btn btn-outline-secondary" style="border-radius:12px;">Back to Events</a>
                </div>
            </div>

            @* Related *@
            @if (Model.Related?.Any() == true)
            {
                <div class="mt-4">
                    <h4 class="mb-3" style="color:#5a8f2b; font-weight:800;">You might also like</h4>
                    <div class="row g-3">
                        @foreach (var r in Model.Related)
                        {
                            <div class="col-12 col-md-6">
                                <div class="card cardz">
                                    <img class="card-img-top" style="height:190px; object-fit:cover;"
                                         src="@(string.IsNullOrWhiteSpace(r.ImageUrl) ? "/images/placeholder-event.jpg" : r.ImageUrl)" alt="@r.Title" />
                                    <div class="card-body">
                                        <h5 class="card-title">@r.Title</h5>
                                        <p class="card-text small mb-1"><strong>Time:</strong> @r.StartTime.ToString("g") – @r.EndTime.ToString("g")</p>
                                        <p class="card-text small mb-2"><strong>Location:</strong> @r.Location</p>
                                        <a asp-action="Details" asp-route-id="@r.EventId" class="btn btn-sm btn-zoo">View details</a>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            }
        </div>

        <div class="col-lg-4">
            <div class="card cardz p-3 p-md-4">
                <h5 class="mb-3" style="color:#5a8f2b; font-weight:800;">Featuring Animals</h5>
            @if (Model.FeaturingAnimals?.Any() == true)
            {
                <div class="d-grid" style="grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px;">
                    @foreach (var a in Model.FeaturingAnimals)
                    {
                        <div class="border rounded-4 p-2">
                            <div class="ratio ratio-4x3 mb-2">
                                <img src="@(string.IsNullOrWhiteSpace(a.ImageUrl)
                                                           ? "/images/placeholder-animal.jpg"
                                                           : a.ImageUrl)"
                             alt="@a.Name" style="object-fit:cover; border-radius:10px;">
                    </div>
                    <div class="fw-semibold">@a.Name</div>
                    <div class="text-muted small">@a.Species</div>
                </div>
                                }
                </div>
            }
            else
            {

                <p class="text-muted">No animals linked to this event.</p>
            }

            </div>
        </div>
    </div>

